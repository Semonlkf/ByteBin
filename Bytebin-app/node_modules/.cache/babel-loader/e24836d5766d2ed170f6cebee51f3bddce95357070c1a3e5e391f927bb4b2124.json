{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { activeArticle, articleRemove, getArticlePage, getDetail } from \"@/admin/api/Article\";\nimport { marked } from \"marked\";\nexport default {\n  name: \"ArticleManage\",\n  data() {\n    return {\n      articles: [],\n      page: 1,\n      count: 0,\n      articleDetail: {},\n      detailDialog: false\n    };\n  },\n  methods: {\n    handleCurrentChange() {\n      this.getPage();\n    },\n    getPage() {\n      getArticlePage(this.page).then(res => {\n        this.articles = res.data.articles;\n        this.count = res.data.count;\n      });\n    },\n    getHtml(content) {\n      return marked(content);\n    },\n    getTime(time) {\n      return new Date(time).toLocaleDateString();\n    },\n    articleDelete(index) {\n      this.$prompt('请输入删除原因', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消'\n      }).then(({\n        value\n      }) => {\n        this.remove(index, value);\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '取消操作'\n        });\n      });\n    },\n    remove(index, reason) {\n      let id = this.articles[index].id;\n      articleRemove(id, reason).then(res => {\n        if (res.code === 2001) {\n          this.articles[index].status = 0;\n          this.$message({\n            message: '删除成功',\n            type: 'success'\n          });\n        }\n      });\n    },\n    active(index) {\n      let id = this.articles[index].id;\n      activeArticle(id).then(res => {\n        if (res.code === 2001) {\n          this.articles[index].status = 1;\n          this.$message({\n            message: '激活成功',\n            type: 'success'\n          });\n        }\n      });\n    },\n    toDetail(index) {\n      let id = this.articles[index].id;\n      getDetail(id).then(res => {\n        this.articleDetail = res.data.article;\n        this.articleDetail.content = this.getHtml(this.articleDetail.content);\n        this.detailDialog = true;\n      });\n    }\n  },\n  created() {\n    this.getPage();\n  }\n};","map":{"version":3,"names":["activeArticle","articleRemove","getArticlePage","getDetail","marked","name","data","articles","page","count","articleDetail","detailDialog","methods","handleCurrentChange","getPage","then","res","getHtml","content","getTime","time","Date","toLocaleDateString","articleDelete","index","$prompt","confirmButtonText","cancelButtonText","value","remove","catch","$message","type","message","reason","id","code","status","active","toDetail","article","created"],"sources":["src/admin/views/ArticleManage.vue"],"sourcesContent":["<template>\r\n  <el-container>\r\n    <el-main>\r\n      <el-table\r\n          ref=\"multipleTable\"\r\n          :data=\"articles\"\r\n          style=\"width: 100%\"\r\n          tooltip-effect=\"dark\"\r\n      >\r\n        <el-table-column\r\n            label=\"id\"\r\n            prop=\"id\"\r\n            width=\"120\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"作者\"\r\n            prop=\"userVo.id\"\r\n            width=\"120\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"标题\"\r\n            prop=\"title\"\r\n            show-overflow-tooltip\r\n            width=\"120\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"描述\"\r\n            prop=\"description\"\r\n            show-overflow-tooltip\r\n            width=\"120\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"点击\"\r\n            prop=\"views\"\r\n            width=\"120\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"点赞\"\r\n            prop=\"likeNum\"\r\n            width=\"120\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"评论\"\r\n            prop=\"comments\"\r\n            width=\"120\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"发布时间\"\r\n            width=\"120\">\r\n          <template slot-scope=\"scope\">\r\n            {{ getTime(articles[scope.$index].createTime) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"更新时间\"\r\n            width=\"120\">\r\n          <template slot-scope=\"scope\">\r\n            {{ getTime(articles[scope.$index].updateTime) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n            align=\"right\">\r\n          <template slot=\"header\" slot-scope=\"scope\">\r\n            <el-input\r\n                placeholder=\"输入关键字搜索\"\r\n                size=\"mini\"\r\n                style=\"width: 120px\"/>\r\n            <el-button size=\"mini\">搜索</el-button>\r\n          </template>\r\n          <template slot-scope=\"scope\">\r\n            <el-button size=\"mini\" type=\"info\" @click=\"toDetail(scope.$index)\">\r\n              详情\r\n            </el-button>\r\n            <el-button\r\n                v-if=\"articles[scope.$index].status===1\"\r\n                size=\"mini\"\r\n                type=\"danger\"\r\n                @click=\"articleDelete(scope.$index)\"\r\n            >删除\r\n            </el-button>\r\n            <el-button\r\n                v-if=\"articles[scope.$index].status===0\"\r\n                size=\"mini\"\r\n                type=\"primary\"\r\n                @click=\"active(scope.$index)\"\r\n            >激活\r\n            </el-button>\r\n\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <div style=\"text-align: center\">\r\n        <el-pagination\r\n            :current-page.sync=\"page\"\r\n            :page-size=\"15\"\r\n            :total=\"count\"\r\n            background\r\n            layout=\"prev, pager, next, jumper\"\r\n            @current-change=\"handleCurrentChange\">\r\n        </el-pagination>\r\n      </div>\r\n      <el-dialog\r\n          :visible.sync=\"detailDialog\"\r\n          title=\"文章详情\"\r\n          width=\"60%\">\r\n        <div v-if=\"!articleDetail.isEmpty\">\r\n          <div id=\"title\" style=\"margin-bottom: 8px;text-align: center\">\r\n            <h1 style=\"font-size: 28px\">{{ articleDetail.title }}</h1>\r\n          </div>\r\n          <div id=\"article-info\"\r\n               style=\"font-size: 10px;font-weight: lighter;height: 14px;margin-top: 6px;text-align: center\">\r\n            <span>{{ articleDetail.views }}阅读</span>\r\n            <span>{{ articleDetail.comments }}评论</span>\r\n            <span>{{ articleDetail.likeNum }}喜欢</span>\r\n            <span>{{ new Date(articleDetail.createTime).toLocaleString() }}</span>\r\n          </div>\r\n          <div id=\"content\">\r\n            <mavon-editor\r\n                :editable=\"false\"\r\n                :subfield=\"false\"\r\n                :toolbarsFlag=\"false\"\r\n                :value=\"articleDetail.content\"\r\n                defaultOpen=\"preview\"\r\n                style=\"z-index: 5\"\r\n            ></mavon-editor>\r\n          </div>\r\n        </div>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n      </span>\r\n      </el-dialog>\r\n    </el-main>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nimport {activeArticle, articleRemove, getArticlePage, getDetail} from \"@/admin/api/Article\";\r\nimport {marked} from \"marked\"\r\n\r\nexport default {\r\n  name: \"ArticleManage\",\r\n  data() {\r\n    return {\r\n      articles: [],\r\n      page: 1,\r\n      count: 0,\r\n      articleDetail: {},\r\n      detailDialog: false,\r\n    }\r\n  },\r\n  methods: {\r\n    handleCurrentChange() {\r\n      this.getPage()\r\n    },\r\n    getPage() {\r\n      getArticlePage(this.page).then((res) => {\r\n        this.articles = res.data.articles\r\n        this.count = res.data.count\r\n      })\r\n    },\r\n    getHtml(content) {\r\n      return marked(content)\r\n    },\r\n    getTime(time) {\r\n      return new Date(time).toLocaleDateString()\r\n    },\r\n    articleDelete(index) {\r\n      this.$prompt('请输入删除原因', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n      }).then(({value}) => {\r\n        this.remove(index, value)\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '取消操作'\r\n        });\r\n      });\r\n    }\r\n    ,\r\n    remove(index, reason) {\r\n      let id = this.articles[index].id;\r\n      articleRemove(id, reason).then((res) => {\r\n        if (res.code === 2001) {\r\n          this.articles[index].status = 0\r\n          this.$message({\r\n            message: '删除成功',\r\n            type: 'success'\r\n          });\r\n        }\r\n      })\r\n    },\r\n    active(index) {\r\n      let id = this.articles[index].id;\r\n      activeArticle(id).then((res) => {\r\n        if (res.code === 2001) {\r\n          this.articles[index].status = 1\r\n          this.$message({\r\n            message: '激活成功',\r\n            type: 'success'\r\n          });\r\n        }\r\n      })\r\n    },\r\n    toDetail(index) {\r\n      let id = this.articles[index].id;\r\n      getDetail(id).then((res) => {\r\n        this.articleDetail = res.data.article\r\n        this.articleDetail.content = this.getHtml(this.articleDetail.content);\r\n        this.detailDialog = true\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    this.getPage()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-main::-webkit-scrollbar {\r\n  width: 0 !important\r\n}\r\n</style>"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA,SAAAA,aAAA,EAAAC,aAAA,EAAAC,cAAA,EAAAC,SAAA;AACA,SAAAC,MAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,IAAA;MACAC,KAAA;MACAC,aAAA;MACAC,YAAA;IACA;EACA;EACAC,OAAA;IACAC,oBAAA;MACA,KAAAC,OAAA;IACA;IACAA,QAAA;MACAZ,cAAA,MAAAM,IAAA,EAAAO,IAAA,CAAAC,GAAA;QACA,KAAAT,QAAA,GAAAS,GAAA,CAAAV,IAAA,CAAAC,QAAA;QACA,KAAAE,KAAA,GAAAO,GAAA,CAAAV,IAAA,CAAAG,KAAA;MACA;IACA;IACAQ,QAAAC,OAAA;MACA,OAAAd,MAAA,CAAAc,OAAA;IACA;IACAC,QAAAC,IAAA;MACA,WAAAC,IAAA,CAAAD,IAAA,EAAAE,kBAAA;IACA;IACAC,cAAAC,KAAA;MACA,KAAAC,OAAA;QACAC,iBAAA;QACAC,gBAAA;MACA,GAAAZ,IAAA;QAAAa;MAAA;QACA,KAAAC,MAAA,CAAAL,KAAA,EAAAI,KAAA;MACA,GAAAE,KAAA;QACA,KAAAC,QAAA;UACAC,IAAA;UACAC,OAAA;QACA;MACA;IACA;IAEAJ,OAAAL,KAAA,EAAAU,MAAA;MACA,IAAAC,EAAA,QAAA5B,QAAA,CAAAiB,KAAA,EAAAW,EAAA;MACAlC,aAAA,CAAAkC,EAAA,EAAAD,MAAA,EAAAnB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAoB,IAAA;UACA,KAAA7B,QAAA,CAAAiB,KAAA,EAAAa,MAAA;UACA,KAAAN,QAAA;YACAE,OAAA;YACAD,IAAA;UACA;QACA;MACA;IACA;IACAM,OAAAd,KAAA;MACA,IAAAW,EAAA,QAAA5B,QAAA,CAAAiB,KAAA,EAAAW,EAAA;MACAnC,aAAA,CAAAmC,EAAA,EAAApB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAoB,IAAA;UACA,KAAA7B,QAAA,CAAAiB,KAAA,EAAAa,MAAA;UACA,KAAAN,QAAA;YACAE,OAAA;YACAD,IAAA;UACA;QACA;MACA;IACA;IACAO,SAAAf,KAAA;MACA,IAAAW,EAAA,QAAA5B,QAAA,CAAAiB,KAAA,EAAAW,EAAA;MACAhC,SAAA,CAAAgC,EAAA,EAAApB,IAAA,CAAAC,GAAA;QACA,KAAAN,aAAA,GAAAM,GAAA,CAAAV,IAAA,CAAAkC,OAAA;QACA,KAAA9B,aAAA,CAAAQ,OAAA,QAAAD,OAAA,MAAAP,aAAA,CAAAQ,OAAA;QACA,KAAAP,YAAA;MACA;IACA;EACA;EACA8B,QAAA;IACA,KAAA3B,OAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}