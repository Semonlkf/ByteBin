{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { activeAccount, closeAccount, getUserList } from \"@/admin/api/User\";\nexport default {\n  name: \"UserManage\",\n  data() {\n    return {\n      users: [],\n      multipleSelection: [],\n      page: 1,\n      count: 0\n    };\n  },\n  methods: {\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    handleCurrentChange() {\n      this.getUserPage();\n    },\n    getUserPage() {\n      getUserList(this.page).then(res => {\n        this.users = res.data.page.records;\n        this.count = res.data.page.total;\n      });\n    },\n    getTime(time) {\n      return new Date(time).toLocaleDateString();\n    },\n    closeAccount(index) {\n      let id = this.users[index].id;\n      closeAccount(id).then(res => {\n        if (res.code === 2001) {\n          this.users[index].status = 0;\n          this.$message({\n            message: '注销用户' + id + '成功',\n            type: 'success'\n          });\n        }\n      });\n    },\n    activeAccount(index) {\n      let id = this.users[index].id;\n      activeAccount(id).then(res => {\n        if (res.code === 2001) {\n          this.users[index].status = 1;\n          this.$message({\n            message: '激活用户' + id + '成功',\n            type: 'success'\n          });\n        }\n      });\n    }\n  },\n  created() {\n    this.getUserPage();\n  }\n};","map":{"version":3,"names":["activeAccount","closeAccount","getUserList","name","data","users","multipleSelection","page","count","methods","handleSelectionChange","val","handleCurrentChange","getUserPage","then","res","records","total","getTime","time","Date","toLocaleDateString","index","id","code","status","$message","message","type","created"],"sources":["src/admin/views/UserManage.vue"],"sourcesContent":["<template>\r\n  <el-container>\r\n    <el-main>\r\n      <el-table\r\n          ref=\"multipleTable\"\r\n          :data=\"users\"\r\n          style=\"width: 100%\"\r\n          tooltip-effect=\"dark\"\r\n      >\r\n        <el-table-column\r\n            label=\"id\"\r\n            prop=\"id\"\r\n            width=\"120\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"用户名\"\r\n            prop=\"username\"\r\n            width=\"120\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"昵称\"\r\n            prop=\"nickname\"\r\n            show-overflow-tooltip\r\n            width=\"120\">\r\n        </el-table-column>\r\n        <el-table-column label=\"头像\" width=\"120\">\r\n          <template slot-scope=\"scope\">\r\n            <el-image\r\n                :preview-src-list=\"[users[scope.$index].avatar]\"\r\n                :src=\"users[scope.$index].avatar\"\r\n                fit=\"cover\"\r\n                style=\"width: 50px; height: 50px;border-radius: 50%\">\r\n            </el-image>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"邮箱\"\r\n            prop=\"email\"\r\n            show-overflow-tooltip\r\n            width=\"120\"\r\n        ></el-table-column>\r\n        <el-table-column\r\n            label=\"角色\"\r\n            width=\"120\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <el-tag v-if=\"users[scope.$index].role===1\">普通用户</el-tag>\r\n            <el-tag v-if=\"users[scope.$index].role===0\" type=\"danger\">管理员</el-tag>\r\n\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"注册时间\"\r\n            width=\"120\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            {{ getTime(users[scope.$index].registrationTime) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"最后登录时间\"\r\n            width=\"120\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            {{ getTime(users[scope.$index].lastLoginTime) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"状态\"\r\n            width=\"120\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <el-tag v-if=\"users[scope.$index].status===1\" type=\"success\">激活</el-tag>\r\n            <el-tag v-if=\"users[scope.$index].status===0\" type=\"info\">注销</el-tag>\r\n\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n            align=\"right\">\r\n          <template slot=\"header\" slot-scope=\"scope\">\r\n            <el-input\r\n                placeholder=\"输入关键字搜索\"\r\n                size=\"mini\"\r\n                style=\"width: 150px\"/>\r\n            <el-button size=\"mini\">搜索</el-button>\r\n          </template>\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n                v-if=\"users[scope.$index].status===1&&users[scope.$index].role!==0\"\r\n                size=\"mini\"\r\n                type=\"danger\"\r\n                @click=\"closeAccount(scope.$index)\"\r\n            >注销\r\n            </el-button>\r\n            <el-button\r\n                v-if=\"users[scope.$index].status===0&&users[scope.$index].role!==0\"\r\n                size=\"mini\"\r\n                type=\"primary\"\r\n                @click=\"activeAccount(scope.$index)\"\r\n            >激活\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <div style=\"text-align: center;margin-top: 10px\">\r\n        <el-pagination\r\n            :current-page.sync=\"page\"\r\n            :page-size=\"15\"\r\n            :total=\"count\"\r\n            background\r\n            layout=\"prev, pager, next, jumper\"\r\n            @current-change=\"handleCurrentChange\">\r\n        </el-pagination>\r\n      </div>\r\n    </el-main>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nimport {activeAccount, closeAccount, getUserList} from \"@/admin/api/User\";\r\n\r\nexport default {\r\n  name: \"UserManage\",\r\n  data() {\r\n    return {\r\n      users: [],\r\n      multipleSelection: [],\r\n      page: 1,\r\n      count: 0\r\n    }\r\n  },\r\n  methods: {\r\n    handleSelectionChange(val) {\r\n      this.multipleSelection = val;\r\n    },\r\n    handleCurrentChange() {\r\n      this.getUserPage();\r\n    }\r\n    ,\r\n    getUserPage() {\r\n      getUserList(this.page).then((res) => {\r\n        this.users = res.data.page.records\r\n        this.count = res.data.page.total\r\n      })\r\n    },\r\n    getTime(time) {\r\n      return new Date(time).toLocaleDateString()\r\n    },\r\n    closeAccount(index) {\r\n      let id = this.users[index].id\r\n      closeAccount(id).then((res) => {\r\n        if (res.code === 2001) {\r\n          this.users[index].status = 0;\r\n          this.$message({\r\n            message: '注销用户' + id + '成功',\r\n            type: 'success'\r\n          });\r\n        }\r\n      })\r\n    },\r\n    activeAccount(index) {\r\n      let id = this.users[index].id\r\n      activeAccount(id).then((res) => {\r\n        if (res.code === 2001) {\r\n          this.users[index].status = 1;\r\n          this.$message({\r\n            message: '激活用户' + id + '成功',\r\n            type: 'success'\r\n          });\r\n        }\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    this.getUserPage();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-main::-webkit-scrollbar {\r\n  width: 0 !important\r\n}\r\n</style>"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuHA,SAAAA,aAAA,EAAAC,YAAA,EAAAC,WAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,KAAA;MACAC,iBAAA;MACAC,IAAA;MACAC,KAAA;IACA;EACA;EACAC,OAAA;IACAC,sBAAAC,GAAA;MACA,KAAAL,iBAAA,GAAAK,GAAA;IACA;IACAC,oBAAA;MACA,KAAAC,WAAA;IACA;IAEAA,YAAA;MACAX,WAAA,MAAAK,IAAA,EAAAO,IAAA,CAAAC,GAAA;QACA,KAAAV,KAAA,GAAAU,GAAA,CAAAX,IAAA,CAAAG,IAAA,CAAAS,OAAA;QACA,KAAAR,KAAA,GAAAO,GAAA,CAAAX,IAAA,CAAAG,IAAA,CAAAU,KAAA;MACA;IACA;IACAC,QAAAC,IAAA;MACA,WAAAC,IAAA,CAAAD,IAAA,EAAAE,kBAAA;IACA;IACApB,aAAAqB,KAAA;MACA,IAAAC,EAAA,QAAAlB,KAAA,CAAAiB,KAAA,EAAAC,EAAA;MACAtB,YAAA,CAAAsB,EAAA,EAAAT,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAS,IAAA;UACA,KAAAnB,KAAA,CAAAiB,KAAA,EAAAG,MAAA;UACA,KAAAC,QAAA;YACAC,OAAA,WAAAJ,EAAA;YACAK,IAAA;UACA;QACA;MACA;IACA;IACA5B,cAAAsB,KAAA;MACA,IAAAC,EAAA,QAAAlB,KAAA,CAAAiB,KAAA,EAAAC,EAAA;MACAvB,aAAA,CAAAuB,EAAA,EAAAT,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAS,IAAA;UACA,KAAAnB,KAAA,CAAAiB,KAAA,EAAAG,MAAA;UACA,KAAAC,QAAA;YACAC,OAAA,WAAAJ,EAAA;YACAK,IAAA;UACA;QACA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAhB,WAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}