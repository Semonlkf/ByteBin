{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Navigation from \"@/components/Navigation.vue\";\nimport { deleteSort, getDetail, updateSort } from \"@/api/Sort\";\nimport ArticleList from \"@/components/ArticleList.vue\";\nexport default {\n  name: \"SortDetail\",\n  components: {\n    'navigation': Navigation,\n    'article-list': ArticleList\n  },\n  data() {\n    return {\n      id: '',\n      sort: {},\n      articles: [],\n      userId: '',\n      dialogVisible: false,\n      choose: {},\n      cover: [],\n      addDialog: false,\n      sortForAdd: {}\n    };\n  },\n  methods: {\n    getDetail() {\n      getDetail(this.id).then(res => {\n        this.sort = res.data.sort;\n        this.articles = res.data.articles;\n      });\n    },\n    deleteSort(index) {\n      deleteSort(this.sorts[index].id).then(res => {\n        if (res.code === 2001) {\n          this.$router.push(\"/index\");\n        } else {\n          this.$notify({\n            title: \"Bloggy\",\n            message: res.message,\n            type: \"error\",\n            duration: 1000\n          });\n        }\n      });\n    },\n    updateSort() {\n      updateSort(this.choose.id, this.choose.title, this.cover[0].raw).then(res => {\n        if (res.code === 2001) {\n          this.dialogVisible = false;\n          this.choose = {};\n          this.cover = [];\n          this.getDetail();\n        } else {\n          this.$notify({\n            title: \"Bloggy\",\n            message: res.message,\n            type: \"error\",\n            duration: 1000\n          });\n        }\n      });\n    },\n    handleChange(file, fileList) {\n      this.cover[0] = file;\n      this.cover[0].url = URL.createObjectURL(file.raw);\n      this.$forceUpdate();\n    }\n  },\n  created() {\n    this.id = this.$route.query.id;\n    this.userId = this.$cookie.get(\"id\");\n    this.getDetail();\n  }\n};","map":{"version":3,"names":["Navigation","deleteSort","getDetail","updateSort","ArticleList","name","components","data","id","sort","articles","userId","dialogVisible","choose","cover","addDialog","sortForAdd","methods","then","res","index","sorts","code","$router","push","$notify","title","message","type","duration","raw","handleChange","file","fileList","url","URL","createObjectURL","$forceUpdate","created","$route","query","$cookie","get"],"sources":["src/views/SortDetail.vue"],"sourcesContent":["<template>\n  <el-container>\n    <el-main>\n      <el-card class=\"box-card\">\n        <div slot=\"header\" class=\"clearfix\">\n          <el-row style=\"align-items: flex-end;\">\n            <el-col :span=\"5\">\n              <el-image :src=\"sort.cover\" fit=\"cover\"\n                        style=\"width: 150px;height: 150px; border: none; box-shadow: none;\"/>\n            </el-col>\n            <el-col :span=\"10\" style=\"text-align: left;margin-top: 50px\">\n              <el-row><h1>{{ sort.title }}</h1></el-row>\n              <el-row style=\"font-weight: lighter;color: #8c939d\">\n                <span>创建于&nbsp;</span>{{ new Date(sort.createTime).toLocaleDateString() }}\n              </el-row>\n            </el-col>\n            <el-col v-if=\"userId==sort.owner\" :span=\"8\" style=\"margin-top: 124px;text-align: right\">\n              <el-link @click.native=\"()=>{dialogVisible=true;choose=sort;cover[0]={};cover[0].url=sort.cover}\">\n                <i class=\"el-icon-edit-outline\"/>\n                编辑\n              </el-link>\n              <el-link style=\"margin-left: 20px\" @click.native=\"deleteSort(index)\">\n                <i class=\"el-icon-delete-solid\"/>\n                删除\n              </el-link>\n            </el-col>\n          </el-row>\n        </div>\n\n\n        <div>\n          <article-list :articles=\"articles\"/>\n        </div>\n      </el-card>\n    </el-main>\n    <el-dialog\n        :visible.sync=\"dialogVisible\"\n        title=\"编辑\"\n        width=\"40%\"\n    >\n      <div>\n        <el-container>\n          <el-main>\n            <el-row style=\"text-align:center;margin-bottom: 100px\">\n              <el-upload\n                  :auto-upload=\"false\"\n                  :file-list=\"cover\"\n                  :on-change=\"handleChange\"\n                  :show-file-list=\"false\"\n                  action=\"#\"\n                  class=\"avatar-uploader\" name=\"avatar\">\n                <el-image\n                    v-if=\"cover.length>0\"\n                    :src=\"cover[0].url\"\n                    style=\"width: 200px;height: 150px\"\n                ></el-image>\n                <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n              </el-upload>\n            </el-row>\n\n            <el-row>\n              <el-input v-model=\"choose.title\" maxlength=\"15\"></el-input>\n\n            </el-row>\n          </el-main>\n        </el-container>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n    <el-button @click=\"dialogVisible = false\">取 消</el-button>\n    <el-button type=\"primary\" @click=\"updateSort\">确 定</el-button>\n  </span>\n    </el-dialog>\n  </el-container>\n</template>\n\n<script>\nimport Navigation from \"@/components/Navigation.vue\";\nimport {deleteSort, getDetail, updateSort} from \"@/api/Sort\";\nimport ArticleList from \"@/components/ArticleList.vue\";\n\nexport default {\n  name: \"SortDetail\",\n  components: {\n    'navigation': Navigation,\n    'article-list': ArticleList\n  },\n  data() {\n    return {\n      id: '',\n      sort: {},\n      articles: [],\n      userId: '',\n      dialogVisible: false,\n      choose: {},\n      cover: [],\n      addDialog: false,\n      sortForAdd: {}\n    }\n  },\n  methods: {\n    getDetail() {\n      getDetail(this.id).then((res) => {\n        this.sort = res.data.sort;\n        this.articles = res.data.articles\n      })\n    },\n    deleteSort(index) {\n      deleteSort(this.sorts[index].id).then((res) => {\n        if (res.code === 2001) {\n          this.$router.push(\"/index\")\n        } else {\n          this.$notify({\n            title: \"Bloggy\",\n            message: res.message,\n            type: \"error\",\n            duration: 1000\n          })\n        }\n      })\n    },\n    updateSort() {\n      updateSort(this.choose.id, this.choose.title, this.cover[0].raw).then((res) => {\n        if (res.code === 2001) {\n          this.dialogVisible = false;\n          this.choose = {}\n          this.cover = []\n          this.getDetail()\n        } else {\n          this.$notify({\n            title: \"Bloggy\",\n            message: res.message,\n            type: \"error\",\n            duration: 1000\n          })\n        }\n      })\n    },\n    handleChange(file, fileList) {\n      this.cover[0] = file\n      this.cover[0].url = URL.createObjectURL(file.raw)\n      this.$forceUpdate()\n    },\n  },\n  created() {\n    this.id = this.$route.query.id;\n    this.userId = this.$cookie.get(\"id\");\n    this.getDetail()\n  }\n}\n</script>\n\n<style scoped>\n.box-card {\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 1%;\n}\n</style>"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4EA,OAAAA,UAAA;AACA,SAAAC,UAAA,EAAAC,SAAA,EAAAC,UAAA;AACA,OAAAC,WAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACA,cAAAN,UAAA;IACA,gBAAAI;EACA;EACAG,KAAA;IACA;MACAC,EAAA;MACAC,IAAA;MACAC,QAAA;MACAC,MAAA;MACAC,aAAA;MACAC,MAAA;MACAC,KAAA;MACAC,SAAA;MACAC,UAAA;IACA;EACA;EACAC,OAAA;IACAf,UAAA;MACAA,SAAA,MAAAM,EAAA,EAAAU,IAAA,CAAAC,GAAA;QACA,KAAAV,IAAA,GAAAU,GAAA,CAAAZ,IAAA,CAAAE,IAAA;QACA,KAAAC,QAAA,GAAAS,GAAA,CAAAZ,IAAA,CAAAG,QAAA;MACA;IACA;IACAT,WAAAmB,KAAA;MACAnB,UAAA,MAAAoB,KAAA,CAAAD,KAAA,EAAAZ,EAAA,EAAAU,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAG,IAAA;UACA,KAAAC,OAAA,CAAAC,IAAA;QACA;UACA,KAAAC,OAAA;YACAC,KAAA;YACAC,OAAA,EAAAR,GAAA,CAAAQ,OAAA;YACAC,IAAA;YACAC,QAAA;UACA;QACA;MACA;IACA;IACA1B,WAAA;MACAA,UAAA,MAAAU,MAAA,CAAAL,EAAA,OAAAK,MAAA,CAAAa,KAAA,OAAAZ,KAAA,IAAAgB,GAAA,EAAAZ,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAG,IAAA;UACA,KAAAV,aAAA;UACA,KAAAC,MAAA;UACA,KAAAC,KAAA;UACA,KAAAZ,SAAA;QACA;UACA,KAAAuB,OAAA;YACAC,KAAA;YACAC,OAAA,EAAAR,GAAA,CAAAQ,OAAA;YACAC,IAAA;YACAC,QAAA;UACA;QACA;MACA;IACA;IACAE,aAAAC,IAAA,EAAAC,QAAA;MACA,KAAAnB,KAAA,MAAAkB,IAAA;MACA,KAAAlB,KAAA,IAAAoB,GAAA,GAAAC,GAAA,CAAAC,eAAA,CAAAJ,IAAA,CAAAF,GAAA;MACA,KAAAO,YAAA;IACA;EACA;EACAC,QAAA;IACA,KAAA9B,EAAA,QAAA+B,MAAA,CAAAC,KAAA,CAAAhC,EAAA;IACA,KAAAG,MAAA,QAAA8B,OAAA,CAAAC,GAAA;IACA,KAAAxC,SAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}