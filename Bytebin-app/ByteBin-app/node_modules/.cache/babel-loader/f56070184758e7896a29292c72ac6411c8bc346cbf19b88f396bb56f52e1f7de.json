{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { activeAccount, closeAccount, getUserList } from \"@/admin/api/User\";\nexport default {\n  name: \"UserManage\",\n  data() {\n    return {\n      users: [],\n      multipleSelection: [],\n      page: 1,\n      count: 0\n    };\n  },\n  methods: {\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    handleCurrentChange() {\n      this.getUserPage();\n    },\n    getUserPage() {\n      getUserList(this.page).then(res => {\n        this.users = res.data.page.records;\n        this.count = res.data.page.total;\n      });\n    },\n    getTime(time) {\n      return new Date(time).toLocaleDateString();\n    },\n    closeAccount(index) {\n      let id = this.users[index].id;\n      closeAccount(id).then(res => {\n        if (res.code === 2001) {\n          this.users[index].status = 0;\n          this.$message({\n            message: '注销用户' + id + '成功',\n            type: 'success'\n          });\n        }\n      });\n    },\n    activeAccount(index) {\n      let id = this.users[index].id;\n      activeAccount(id).then(res => {\n        if (res.code === 2001) {\n          this.users[index].status = 1;\n          this.$message({\n            message: '激活用户' + id + '成功',\n            type: 'success'\n          });\n        }\n      });\n    }\n  },\n  created() {\n    this.getUserPage();\n  }\n};","map":{"version":3,"names":["activeAccount","closeAccount","getUserList","name","data","users","multipleSelection","page","count","methods","handleSelectionChange","val","handleCurrentChange","getUserPage","then","res","records","total","getTime","time","Date","toLocaleDateString","index","id","code","status","$message","message","type","created"],"sources":["src/admin/views/UserManage.vue"],"sourcesContent":["<template>\n  <el-container>\n    <el-main>\n      <el-table\n          ref=\"multipleTable\"\n          :data=\"users\"\n          style=\"width: 100%\"\n          tooltip-effect=\"dark\"\n      >\n        <el-table-column\n            label=\"id\"\n            prop=\"id\"\n            width=\"120\">\n        </el-table-column>\n        <el-table-column\n            label=\"用户名\"\n            prop=\"username\"\n            width=\"120\">\n        </el-table-column>\n        <el-table-column\n            label=\"昵称\"\n            prop=\"nickname\"\n            show-overflow-tooltip\n            width=\"120\">\n        </el-table-column>\n        <el-table-column label=\"头像\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-image\n                :preview-src-list=\"[users[scope.$index].avatar]\"\n                :src=\"users[scope.$index].avatar\"\n                fit=\"cover\"\n                style=\"width: 50px; height: 50px;border-radius: 50%\">\n            </el-image>\n          </template>\n        </el-table-column>\n        <el-table-column\n            label=\"邮箱\"\n            prop=\"email\"\n            show-overflow-tooltip\n            width=\"120\"\n        ></el-table-column>\n        <el-table-column\n            label=\"角色\"\n            width=\"120\"\n        >\n          <template slot-scope=\"scope\">\n            <el-tag v-if=\"users[scope.$index].role===1\">普通用户</el-tag>\n            <el-tag v-if=\"users[scope.$index].role===0\" type=\"danger\">管理员</el-tag>\n\n          </template>\n        </el-table-column>\n        <el-table-column\n            label=\"注册时间\"\n            width=\"120\"\n        >\n          <template slot-scope=\"scope\">\n            {{ getTime(users[scope.$index].registrationTime) }}\n          </template>\n        </el-table-column>\n        <el-table-column\n            label=\"最后登录时间\"\n            width=\"120\"\n        >\n          <template slot-scope=\"scope\">\n            {{ getTime(users[scope.$index].lastLoginTime) }}\n          </template>\n        </el-table-column>\n        <el-table-column\n            label=\"状态\"\n            width=\"120\"\n        >\n          <template slot-scope=\"scope\">\n            <el-tag v-if=\"users[scope.$index].status===1\" type=\"success\">激活</el-tag>\n            <el-tag v-if=\"users[scope.$index].status===0\" type=\"info\">注销</el-tag>\n\n          </template>\n        </el-table-column>\n        <el-table-column\n            align=\"right\">\n          <template slot=\"header\" slot-scope=\"scope\">\n            <el-input\n                placeholder=\"输入关键字搜索\"\n                size=\"mini\"\n                style=\"width: 150px\"/>\n            <el-button size=\"mini\">搜索</el-button>\n          </template>\n          <template slot-scope=\"scope\">\n            <el-button\n                v-if=\"users[scope.$index].status===1&&users[scope.$index].role!==0\"\n                size=\"mini\"\n                type=\"danger\"\n                @click=\"closeAccount(scope.$index)\"\n            >注销\n            </el-button>\n            <el-button\n                v-if=\"users[scope.$index].status===0&&users[scope.$index].role!==0\"\n                size=\"mini\"\n                type=\"primary\"\n                @click=\"activeAccount(scope.$index)\"\n            >激活\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div style=\"text-align: center;margin-top: 10px\">\n        <el-pagination\n            :current-page.sync=\"page\"\n            :page-size=\"15\"\n            :total=\"count\"\n            background\n            layout=\"prev, pager, next, jumper\"\n            @current-change=\"handleCurrentChange\">\n        </el-pagination>\n      </div>\n    </el-main>\n  </el-container>\n</template>\n\n<script>\nimport {activeAccount, closeAccount, getUserList} from \"@/admin/api/User\";\n\nexport default {\n  name: \"UserManage\",\n  data() {\n    return {\n      users: [],\n      multipleSelection: [],\n      page: 1,\n      count: 0\n    }\n  },\n  methods: {\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    handleCurrentChange() {\n      this.getUserPage();\n    }\n    ,\n    getUserPage() {\n      getUserList(this.page).then((res) => {\n        this.users = res.data.page.records\n        this.count = res.data.page.total\n      })\n    },\n    getTime(time) {\n      return new Date(time).toLocaleDateString()\n    },\n    closeAccount(index) {\n      let id = this.users[index].id\n      closeAccount(id).then((res) => {\n        if (res.code === 2001) {\n          this.users[index].status = 0;\n          this.$message({\n            message: '注销用户' + id + '成功',\n            type: 'success'\n          });\n        }\n      })\n    },\n    activeAccount(index) {\n      let id = this.users[index].id\n      activeAccount(id).then((res) => {\n        if (res.code === 2001) {\n          this.users[index].status = 1;\n          this.$message({\n            message: '激活用户' + id + '成功',\n            type: 'success'\n          });\n        }\n      })\n    }\n  },\n  created() {\n    this.getUserPage();\n  }\n}\n</script>\n\n<style scoped>\n.el-main::-webkit-scrollbar {\n  width: 0 !important\n}\n</style>"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuHA,SAAAA,aAAA,EAAAC,YAAA,EAAAC,WAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,KAAA;MACAC,iBAAA;MACAC,IAAA;MACAC,KAAA;IACA;EACA;EACAC,OAAA;IACAC,sBAAAC,GAAA;MACA,KAAAL,iBAAA,GAAAK,GAAA;IACA;IACAC,oBAAA;MACA,KAAAC,WAAA;IACA;IAEAA,YAAA;MACAX,WAAA,MAAAK,IAAA,EAAAO,IAAA,CAAAC,GAAA;QACA,KAAAV,KAAA,GAAAU,GAAA,CAAAX,IAAA,CAAAG,IAAA,CAAAS,OAAA;QACA,KAAAR,KAAA,GAAAO,GAAA,CAAAX,IAAA,CAAAG,IAAA,CAAAU,KAAA;MACA;IACA;IACAC,QAAAC,IAAA;MACA,WAAAC,IAAA,CAAAD,IAAA,EAAAE,kBAAA;IACA;IACApB,aAAAqB,KAAA;MACA,IAAAC,EAAA,QAAAlB,KAAA,CAAAiB,KAAA,EAAAC,EAAA;MACAtB,YAAA,CAAAsB,EAAA,EAAAT,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAS,IAAA;UACA,KAAAnB,KAAA,CAAAiB,KAAA,EAAAG,MAAA;UACA,KAAAC,QAAA;YACAC,OAAA,WAAAJ,EAAA;YACAK,IAAA;UACA;QACA;MACA;IACA;IACA5B,cAAAsB,KAAA;MACA,IAAAC,EAAA,QAAAlB,KAAA,CAAAiB,KAAA,EAAAC,EAAA;MACAvB,aAAA,CAAAuB,EAAA,EAAAT,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAS,IAAA;UACA,KAAAnB,KAAA,CAAAiB,KAAA,EAAAG,MAAA;UACA,KAAAC,QAAA;YACAC,OAAA,WAAAJ,EAAA;YACAK,IAAA;UACA;QACA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAhB,WAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}