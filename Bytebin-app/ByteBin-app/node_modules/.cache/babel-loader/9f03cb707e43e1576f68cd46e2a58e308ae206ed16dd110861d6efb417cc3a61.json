{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { activeArticle, articleRemove, getArticlePage, getDetail } from \"@/admin/api/Article\";\nimport { marked } from \"marked\";\nexport default {\n  name: \"ArticleManage\",\n  data() {\n    return {\n      articles: [],\n      page: 1,\n      count: 0,\n      articleDetail: {},\n      detailDialog: false\n    };\n  },\n  methods: {\n    handleCurrentChange() {\n      this.getPage();\n    },\n    getPage() {\n      getArticlePage(this.page).then(res => {\n        this.articles = res.data.articles;\n        this.count = res.data.count;\n      });\n    },\n    getHtml(content) {\n      return marked(content);\n    },\n    getTime(time) {\n      return new Date(time).toLocaleDateString();\n    },\n    articleDelete(index) {\n      this.$prompt('请输入删除原因', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消'\n      }).then(({\n        value\n      }) => {\n        this.remove(index, value);\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '取消操作'\n        });\n      });\n    },\n    remove(index, reason) {\n      let id = this.articles[index].id;\n      articleRemove(id, reason).then(res => {\n        if (res.code === 2001) {\n          this.articles[index].status = 0;\n          this.$message({\n            message: '删除成功',\n            type: 'success'\n          });\n        }\n      });\n    },\n    active(index) {\n      let id = this.articles[index].id;\n      activeArticle(id).then(res => {\n        if (res.code === 2001) {\n          this.articles[index].status = 1;\n          this.$message({\n            message: '激活成功',\n            type: 'success'\n          });\n        }\n      });\n    },\n    toDetail(index) {\n      let id = this.articles[index].id;\n      getDetail(id).then(res => {\n        this.articleDetail = res.data.article;\n        this.articleDetail.content = this.getHtml(this.articleDetail.content);\n        this.detailDialog = true;\n      });\n    }\n  },\n  created() {\n    this.getPage();\n  }\n};","map":{"version":3,"names":["activeArticle","articleRemove","getArticlePage","getDetail","marked","name","data","articles","page","count","articleDetail","detailDialog","methods","handleCurrentChange","getPage","then","res","getHtml","content","getTime","time","Date","toLocaleDateString","articleDelete","index","$prompt","confirmButtonText","cancelButtonText","value","remove","catch","$message","type","message","reason","id","code","status","active","toDetail","article","created"],"sources":["src/admin/views/ArticleManage.vue"],"sourcesContent":["<template>\n  <el-container>\n    <el-main>\n      <el-table\n          ref=\"multipleTable\"\n          :data=\"articles\"\n          style=\"width: 100%\"\n          tooltip-effect=\"dark\"\n      >\n        <el-table-column\n            label=\"id\"\n            prop=\"id\"\n            width=\"120\">\n        </el-table-column>\n        <el-table-column\n            label=\"作者\"\n            prop=\"userVo.id\"\n            width=\"120\">\n        </el-table-column>\n        <el-table-column\n            label=\"标题\"\n            prop=\"title\"\n            show-overflow-tooltip\n            width=\"120\">\n        </el-table-column>\n        <el-table-column\n            label=\"描述\"\n            prop=\"description\"\n            show-overflow-tooltip\n            width=\"120\">\n        </el-table-column>\n        <el-table-column\n            label=\"点击\"\n            prop=\"views\"\n            width=\"120\">\n        </el-table-column>\n        <el-table-column\n            label=\"点赞\"\n            prop=\"likeNum\"\n            width=\"120\">\n        </el-table-column>\n        <el-table-column\n            label=\"评论\"\n            prop=\"comments\"\n            width=\"120\">\n        </el-table-column>\n        <el-table-column\n            label=\"发布时间\"\n            width=\"120\">\n          <template slot-scope=\"scope\">\n            {{ getTime(articles[scope.$index].createTime) }}\n          </template>\n        </el-table-column>\n        <el-table-column\n            label=\"更新时间\"\n            width=\"120\">\n          <template slot-scope=\"scope\">\n            {{ getTime(articles[scope.$index].updateTime) }}\n          </template>\n        </el-table-column>\n        <el-table-column\n            align=\"right\">\n          <template slot=\"header\" slot-scope=\"scope\">\n            <el-input\n                placeholder=\"输入关键字搜索\"\n                size=\"mini\"\n                style=\"width: 120px\"/>\n            <el-button size=\"mini\">搜索</el-button>\n          </template>\n          <template slot-scope=\"scope\">\n            <el-button size=\"mini\" type=\"info\" @click=\"toDetail(scope.$index)\">\n              详情\n            </el-button>\n            <el-button\n                v-if=\"articles[scope.$index].status===1\"\n                size=\"mini\"\n                type=\"danger\"\n                @click=\"articleDelete(scope.$index)\"\n            >删除\n            </el-button>\n            <el-button\n                v-if=\"articles[scope.$index].status===0\"\n                size=\"mini\"\n                type=\"primary\"\n                @click=\"active(scope.$index)\"\n            >激活\n            </el-button>\n\n          </template>\n        </el-table-column>\n      </el-table>\n      <div style=\"text-align: center\">\n        <el-pagination\n            :current-page.sync=\"page\"\n            :page-size=\"15\"\n            :total=\"count\"\n            background\n            layout=\"prev, pager, next, jumper\"\n            @current-change=\"handleCurrentChange\">\n        </el-pagination>\n      </div>\n      <el-dialog\n          :visible.sync=\"detailDialog\"\n          title=\"文章详情\"\n          width=\"60%\">\n        <div v-if=\"!articleDetail.isEmpty\">\n          <div id=\"title\" style=\"margin-bottom: 8px;text-align: center\">\n            <h1 style=\"font-size: 28px\">{{ articleDetail.title }}</h1>\n          </div>\n          <div id=\"article-info\"\n               style=\"font-size: 10px;font-weight: lighter;height: 14px;margin-top: 6px;text-align: center\">\n            <span>{{ articleDetail.views }}阅读</span>\n            <span>{{ articleDetail.comments }}评论</span>\n            <span>{{ articleDetail.likeNum }}喜欢</span>\n            <span>{{ new Date(articleDetail.createTime).toLocaleString() }}</span>\n          </div>\n          <div id=\"content\">\n            <mavon-editor\n                :editable=\"false\"\n                :subfield=\"false\"\n                :toolbarsFlag=\"false\"\n                :value=\"articleDetail.content\"\n                defaultOpen=\"preview\"\n                style=\"z-index: 5\"\n            ></mavon-editor>\n          </div>\n        </div>\n        <span slot=\"footer\" class=\"dialog-footer\">\n      </span>\n      </el-dialog>\n    </el-main>\n  </el-container>\n</template>\n\n<script>\nimport {activeArticle, articleRemove, getArticlePage, getDetail} from \"@/admin/api/Article\";\nimport {marked} from \"marked\"\n\nexport default {\n  name: \"ArticleManage\",\n  data() {\n    return {\n      articles: [],\n      page: 1,\n      count: 0,\n      articleDetail: {},\n      detailDialog: false,\n    }\n  },\n  methods: {\n    handleCurrentChange() {\n      this.getPage()\n    },\n    getPage() {\n      getArticlePage(this.page).then((res) => {\n        this.articles = res.data.articles\n        this.count = res.data.count\n      })\n    },\n    getHtml(content) {\n      return marked(content)\n    },\n    getTime(time) {\n      return new Date(time).toLocaleDateString()\n    },\n    articleDelete(index) {\n      this.$prompt('请输入删除原因', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n      }).then(({value}) => {\n        this.remove(index, value)\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '取消操作'\n        });\n      });\n    }\n    ,\n    remove(index, reason) {\n      let id = this.articles[index].id;\n      articleRemove(id, reason).then((res) => {\n        if (res.code === 2001) {\n          this.articles[index].status = 0\n          this.$message({\n            message: '删除成功',\n            type: 'success'\n          });\n        }\n      })\n    },\n    active(index) {\n      let id = this.articles[index].id;\n      activeArticle(id).then((res) => {\n        if (res.code === 2001) {\n          this.articles[index].status = 1\n          this.$message({\n            message: '激活成功',\n            type: 'success'\n          });\n        }\n      })\n    },\n    toDetail(index) {\n      let id = this.articles[index].id;\n      getDetail(id).then((res) => {\n        this.articleDetail = res.data.article\n        this.articleDetail.content = this.getHtml(this.articleDetail.content);\n        this.detailDialog = true\n      })\n    }\n  },\n  created() {\n    this.getPage()\n  }\n}\n</script>\n\n<style scoped>\n.el-main::-webkit-scrollbar {\n  width: 0 !important\n}\n</style>"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA,SAAAA,aAAA,EAAAC,aAAA,EAAAC,cAAA,EAAAC,SAAA;AACA,SAAAC,MAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,IAAA;MACAC,KAAA;MACAC,aAAA;MACAC,YAAA;IACA;EACA;EACAC,OAAA;IACAC,oBAAA;MACA,KAAAC,OAAA;IACA;IACAA,QAAA;MACAZ,cAAA,MAAAM,IAAA,EAAAO,IAAA,CAAAC,GAAA;QACA,KAAAT,QAAA,GAAAS,GAAA,CAAAV,IAAA,CAAAC,QAAA;QACA,KAAAE,KAAA,GAAAO,GAAA,CAAAV,IAAA,CAAAG,KAAA;MACA;IACA;IACAQ,QAAAC,OAAA;MACA,OAAAd,MAAA,CAAAc,OAAA;IACA;IACAC,QAAAC,IAAA;MACA,WAAAC,IAAA,CAAAD,IAAA,EAAAE,kBAAA;IACA;IACAC,cAAAC,KAAA;MACA,KAAAC,OAAA;QACAC,iBAAA;QACAC,gBAAA;MACA,GAAAZ,IAAA;QAAAa;MAAA;QACA,KAAAC,MAAA,CAAAL,KAAA,EAAAI,KAAA;MACA,GAAAE,KAAA;QACA,KAAAC,QAAA;UACAC,IAAA;UACAC,OAAA;QACA;MACA;IACA;IAEAJ,OAAAL,KAAA,EAAAU,MAAA;MACA,IAAAC,EAAA,QAAA5B,QAAA,CAAAiB,KAAA,EAAAW,EAAA;MACAlC,aAAA,CAAAkC,EAAA,EAAAD,MAAA,EAAAnB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAoB,IAAA;UACA,KAAA7B,QAAA,CAAAiB,KAAA,EAAAa,MAAA;UACA,KAAAN,QAAA;YACAE,OAAA;YACAD,IAAA;UACA;QACA;MACA;IACA;IACAM,OAAAd,KAAA;MACA,IAAAW,EAAA,QAAA5B,QAAA,CAAAiB,KAAA,EAAAW,EAAA;MACAnC,aAAA,CAAAmC,EAAA,EAAApB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAoB,IAAA;UACA,KAAA7B,QAAA,CAAAiB,KAAA,EAAAa,MAAA;UACA,KAAAN,QAAA;YACAE,OAAA;YACAD,IAAA;UACA;QACA;MACA;IACA;IACAO,SAAAf,KAAA;MACA,IAAAW,EAAA,QAAA5B,QAAA,CAAAiB,KAAA,EAAAW,EAAA;MACAhC,SAAA,CAAAgC,EAAA,EAAApB,IAAA,CAAAC,GAAA;QACA,KAAAN,aAAA,GAAAM,GAAA,CAAAV,IAAA,CAAAkC,OAAA;QACA,KAAA9B,aAAA,CAAAQ,OAAA,QAAAD,OAAA,MAAAP,aAAA,CAAAQ,OAAA;QACA,KAAAP,YAAA;MACA;IACA;EACA;EACA8B,QAAA;IACA,KAAA3B,OAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}